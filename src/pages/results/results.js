import Head from "next/head";
import Image from "next/image";
import Link from "next/link";
import styles from "@styles/Home.module.css";
import YouTube from "react-youtube";
import { useState, useEffect, useContext } from "react";
import Button from "@mui/material/Button";
import { AppContext } from "@context/AppContext";
import AlertInfo from "@components/AlertInfo";
import medals from "@utils/data";

/*
  Página que muestra los resultados de la SMA,
  también puede compartir las medallas que obtuvo en 
  redes sociales
*/

export default function Results() {
  const [isEnd, setIsEnd] = useState(false);
  const [seconds, setSeconds] = useState(0);
  const { sharedState } = useContext(AppContext);

  const { medallaUno, medallaDos, medallaTres, medallaCuatro, userName } =
    useContext(AppContext);

  const [medalla1, setMedalla1] = medallaUno;
  const [medalla2, setMedalla2] = medallaDos;
  const [medalla3, setMedalla3] = medallaTres;
  const [medalla4, setMedalla4] = medallaCuatro;
  const [name, setName] = userName;

  let linkCorreo =
    "mailto:?subject=I wanted you to see this site&amp;body=Check out this site http://www.website.com.";

  let lainkCorreo = `mailto:?subject=SMA de los candidatos 2022&amp;body= ${name} ha conseguido las medallas: Conocedor de estudios y Salto a la política, si deseas realizar la experiencia ingresa a https://pruebasma.gregoryinnovo.repl.co/`;
  const shareFb = () => {
    const navUrl =
      "https://www.facebook.com/sharer/sharer.php?u=" +
      "https://youtu.be/GdVpr208yIQ";
    window.open(navUrl, "_blank");
  };

  const nameUser = () => {
    return name;
  };

  return (
    <div className={styles.container}>
      <Head>
        <title>Resultados</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className={styles.main}>
        <h1 className={styles.title}>Tus resultados</h1>
        <h1>{nameUser()}</h1>

        <h1 className={styles.title}>Medallas obtenidas</h1>

        <h4>
          {medalla1 === 2 ? (
            <AlertInfo severity="success" description={medals.uno[0]} />
          ) : (
            <AlertInfo severity="error" description={medals.uno[1]} />
          )}
        </h4>
        <h4>
          {medalla2 === 2 ? (
            <AlertInfo severity="success" description={medals.dos[0]} />
          ) : (
            <AlertInfo severity="error" description={medals.dos[1]} />
          )}
        </h4>
        <h4>
          {medalla3 === 2 ? (
            <AlertInfo severity="success" description={medals.tres[0]} />
          ) : (
            <AlertInfo severity="error" description={medals.tres[1]} />
          )}
        </h4>
        <h4>
          {medalla4 === 2 ? (
            <AlertInfo severity="success" description={medals.cuatro[0]} />
          ) : (
            <AlertInfo severity="error" description={medals.cuatro[1]} />
          )}
        </h4>

        <h1 className={styles.title}>Comparte tus resultados</h1>
        <p>
          {nameUser()} ha conseguido las medallas: Conocedor de estudios y Salto
          a la política, si deseas realizar la experiencia ingresa a
          https://pruebasma.gregoryinnovo.repl.co/ para descubrir los tuyos
        </p>
        <Button
          variant="contained"
          sx={{ mt: 2 }}
          href={`whatsapp://send?text= ${nameUser()} ha conseguido las medallas: Conocedor de estudios y Salto a la política, si deseas realizar la experiencia ingresa a https://pruebasma.gregoryinnovo.repl.co/ para descubrir los tuyos`}
        >
          Compartir en WhatsApp
        </Button>
        <Button
          variant="contained"
          sx={{ mt: 2 }}
          href="mailto:?subject=SMA de los candidatos 2022&amp;body= Haz conseguido las medallas: Conocedor de estudios y Salto a la política, si deseas realizar la experiencia ingresa a https://pruebasma.gregoryinnovo.repl.co/"
        >
          Compartir por correo
        </Button>

        <Button variant="contained" sx={{ mt: 2 }} onClick={() => shareFb()}>
          Compartir en Facebook
        </Button>
      </main>
    </div>
  );
}